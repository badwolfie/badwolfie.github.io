<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>Blog &mdash; Ian Hernández</title>
  <link rel=stylesheet href="css/style.css" type="text/css"/>
</head>

<script type="text/javascript">
  var currentPage = 1,
      entrysPerPage = 5,
      objJson;

  function prevPage () {
    if (currentPage > 1) {
      currentPage--;
      changePage (currentPage);
    }
  }

  function nextPage () {
    if (currentPage < numPages ()) {
      currentPage++;
      changePage (currentPage);
    }
  }

  function changePage (page) {
    var prevPageButton = document.getElementById ('prev-page');
    var nextPageButton = document.getElementById ('next-page');
    var entryList = document.getElementById ('entry-list');

    entryList.innerHTML = '';

    if (numPages () == 0) {
      entryList.innerHTML = '<center><h1>No entries available.</h1></center>';
    } else {
      page = page < 1? 1: page > numPages ()? numPages: page;
      var newEntry, newEntryContent, newEntryFooter, newEntryTitle;
      for (var i = (page - 1) * entrysPerPage; i < (page * entrysPerPage); i++) {
        newEntry = document.createElement ('div');
        newEntry.setAttribute ('class', 'blog-entry');

        newEntryContent = document.createElement ('div');
        newEntryContent.setAttribute ('class', 'blog-entry-content');

        newEntryFooter = document.createElement ('div');
        newEntryFooter.setAttribute ('class', 'blog-entry-footer');
        newEntryFooter.innerHTML = '<img class="blog-entry-footer-icon" src="img/misc/calendar.svg"/> ' + objJson[i].date + '&nbsp;&nbsp;&nbsp;';
        newEntryFooter.innerHTML += '&nbsp;&nbsp;&nbsp;<img class="blog-entry-footer-icon" src="img/misc/author.svg"/> Ian Hernández';

        newEntryTitle = document.createElement ('h1');
        newEntryTitle.innerHTML = objJson[i].title;

        newEntryContent.appendChild (newEntryTitle);
        newEntryContent.innerHTML += objJson[i].content;

        newEntry.appendChild (newEntryContent);
        newEntry.appendChild (newEntryFooter);

        entryList.appendChild (newEntry);
      }
    }

    if (page == 1) {
      prevPageButton.disabled = true;
    } else {
      prevPageButton.disabled = false;
    }

    if (page == numPages ()) {
      nextPageButton.disabled = true;
    } else {
      nextPageButton.disabled = false;
    }
  }

  function numPages () {
    return Math.ceil (objJson.length / entrysPerPage);
  }

  function readFile (file) {
    var rawFile = new XMLHttpRequest ();
    rawFile.open ('GET', file, false);
    rawFile.onreadystatechange = function () {
      if (rawFile.readyState === 4) {
        if (rawFile.status === 200 || rawFile.status == 0) {
          var allText = rawFile.responseText;
          objJson = JSON.parse (allText);
        }
      }
    }

    rawFile.send (null);
  }

  window.onload = function () {
    readFile ('entries.json');
    changePage (1);
  }
</script>

<body id="top">
<div class="outer-wrapper">
  <div class="header">
    <div>
      <a class="shortcut" href="about.html">About</a>
      <a class="shortcut" href="projects.html">Projects</a>
      <a class="shortcut" id="current-shortcut" href="blog.html">Blog</a>

      <div style="display: inline-block; padding: 5px 0; margin-left: 7px;">
        <a class="social-link" target="_blank" href="https://twitter.com/_badwolfie">
          <img class="social-logo" src="img/brand/twitter.svg"/>
        </a>

        <a class="social-link" target="_blank" href="https://github.com/badwolfie">
          <img class="social-logo" src="img/brand/github.svg"/>
        </a>

        <a class="social-link" target="_blank" href="https://linkedin.com/in/ihernandezs">
          <img class="social-logo" src="img/brand/linkedin.svg"/>
        </a>

        <a class="social-link" href="mailto:ihernandezs@openmailbox.org">
          <img class="social-logo" src="img/misc/mail.svg"/>
        </a>
      </div>
    </div>
    <a href="index.html">
      <img class="mini-profile-pic" src="https://secure.gravatar.com/avatar/70124b8a96cba2ff1327d3d07e66dea7?s=400&d=identicon"/>
    </a>
    <span style="clear: both;"/>
  </div>

  <center>
  <div class="inner-wrapper" align="center">
    <div id="entry-list"></div>
    <div align="center">
      <ul class="pagination">
        <li><a href="#" onclick="javascript:prevPage()" id="prev-page">&laquo;</a></li>
        <li><a href="#" onclick="javascript:nextPage()" id="next-page">&raquo;</a></li>
      </ul>
    </div>
  </div>
  </center>

  <div class="footer">
    <span style="float: left; margin-left: 10%;">
      Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a>
    </span>

    <span style="float: right; margin-right: 10%;">
      Copyright &copy; 2016 Ian Hern&aacute;ndez | <a target="_blank" title="The information on this site is licensed under the GNU GPL version 3." href="LICENSE">License</a>
    </span>

    <br style="clear: both;"/>
  </div>
</div>
</body>
</html>
